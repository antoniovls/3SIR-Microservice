<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=
    , initial-scale=1.0">
    <title>Departamentos</title>
</head>
<body>
    <input type="button" value="Buscar departamento" onclick="buscarDepartamento()"/>

    <ul id="departamento">

    </ul>

    <hr>
    <h3>Endere√ßo</h3>
    Cep: <input type="text" id="cep" onblur="buscarCep(this.value)"/><p >
    Rua: <input type="text" id="rua"/>

</body>

<script>

function buscarDepartamento(){
    fetch("http://demo8922908.mockable.io/departamento")
    .then(response => response.json())
    .then(data => criarListaDepartamento(data))
    .catch(error => alert(error))
}

function criarListaDepartamento(data){
    debugger
    for(let i=0; i < data.length; i++) {
        let item = `<li>${data[i]}</li>`
        document.getElementById("departamento").innerHTML += item
    }

}

function buscarCep(cep) {
    const url= (`https://viacep.com.br/ws/${cep}/json/`)
    fetch(url)
    .then(response => response.json())
    .then(data => preencherCep(data))
    .catch(error => alert(error))
}

function preencherCep(data) {
    document.getElementById("rua").value=data.logradouro
}

</script>

</html>
